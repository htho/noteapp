var dbgvar=null,gdb=null,app=angular.module("noteappModule",["ngdexie"]);app.config(["ngDexieProvider",function(t){t.setOptions({name:"notesDb",debug:!1}),t.setConfiguration(function(t){t.version(1).stores({notesStore:"++id,title,details"}),t.on("error",function(t){console.error("db error err="+t)})})}]),app.controller("noteappController",["$scope","$timeout","ngDexie",function(t,e,o){t.db=o.getDb(),t.notesList=[],t.reReadNotesList=function(){o.list("notesStore").then(function(e){t.notesList=e})},t.reReadNotesList(),t.newNote={title:"",details:""},t.addNote=function(){o.put("notesStore",t.newNote).then(function(){t.newNote={title:"",details:""},t.reReadNotesList()})},t.clearNoteList=function(){o.getDb().notesStore.clear().then(function(e){t.reReadNotesList()})},t.editRow=function(t){this.$$isEditMode=1,this.$$orginal=angular.copy(this.note)},t.abortEdit=function(t){this.$$isEditMode=0,this.note=angular.copy(this.$$orginal),delete this.$$orginal},t.removeRow=function(e){o.getDb().notesStore.delete(this.note.id),t.notesList.splice(this.$index,1)},t.saveRow=function(t){var e={};angular.copy(this.note,e),o.put("notesStore",e).then(function(){}),this.$$isEditMode=0}}]);